## ADDED Requirements

### Requirement: 版本歷史列表
系統 SHALL 提供文章的版本歷史列表，按版本號降序排列，顯示版本號、建立時間。

#### Scenario: 取得文章的版本歷史
- **WHEN** 管理者查看一篇有 5 個版本的文章之版本歷史
- **THEN** 系統回傳 5 個版本記錄，按版本號降序排列，每筆包含版本號和建立時間

#### Scenario: 取得無版本歷史的文章
- **WHEN** 管理者查看一篇尚無版本記錄的文章之版本歷史
- **THEN** 系統回傳空陣列

#### Scenario: 查看不存在文章的版本歷史
- **WHEN** 管理者嘗試查看一篇不存在文章的版本歷史
- **THEN** 系統回傳 404 錯誤

### Requirement: 自動版本快照
系統 SHALL 在每次文章建立或更新時，自動建立版本快照。快照 SHALL 包含完整的標題和內容。版本號從 1 開始遞增。當版本數超過 50 時，系統 SHALL 自動刪除最舊的版本。

#### Scenario: 建立文章時產生第一個版本
- **WHEN** 管理者建立一篇新文章
- **THEN** 系統自動建立版本 1，記錄完整的標題和內容

#### Scenario: 更新文章時遞增版本號
- **WHEN** 管理者更新一篇已有 3 個版本的文章
- **THEN** 系統建立版本 4，記錄更新後的完整標題和內容

#### Scenario: 版本數超過上限時自動清理
- **WHEN** 一篇文章已有 50 個版本，管理者再次更新
- **THEN** 系統建立版本 51，並自動刪除版本 1（最舊的版本），保持最多 50 個版本

### Requirement: 版本內容查看
系統 SHALL 允許管理者查看任一歷史版本的完整內容，包含標題和 Markdown 內容。

#### Scenario: 查看特定版本的內容
- **WHEN** 管理者選擇查看版本 3 的內容
- **THEN** 系統回傳版本 3 的完整標題和內容

#### Scenario: 查看不存在的版本
- **WHEN** 管理者嘗試查看一個不存在的版本
- **THEN** 系統回傳 404 錯誤

### Requirement: 版本差異比對
系統 SHALL 允許管理者比對兩個版本之間的差異，以視覺化方式標示新增、刪除、修改的內容。

#### Scenario: 比對兩個版本的差異
- **WHEN** 管理者選擇比對版本 2 和版本 5
- **THEN** 系統回傳兩個版本之間的差異資料，標示新增的行（綠色）和刪除的行（紅色）

#### Scenario: 比對相同版本
- **WHEN** 管理者選擇比對版本 3 和版本 3
- **THEN** 系統回傳無差異的結果

### Requirement: 版本回溯
系統 SHALL 允許管理者將文章回溯到任一歷史版本。回溯操作 SHALL 將指定版本的標題和內容覆寫到當前文章，並自動建立一個新版本快照。

#### Scenario: 回溯到指定版本
- **WHEN** 管理者將一篇有 5 個版本的文章回溯到版本 2
- **THEN** 系統將文章的標題和內容更新為版本 2 的內容，並建立版本 6 作為回溯記錄

#### Scenario: 回溯到不存在的版本
- **WHEN** 管理者嘗試回溯到一個不存在的版本
- **THEN** 系統回傳 404 錯誤
